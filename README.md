# Hsu.Daemon

[![dev](https://github.com/hsu-net/daemon/actions/workflows/build.yml/badge.svg?branch=dev)](https://github.com/hsu-net/daemon/actions/workflows/build.yml)
[![preview](https://github.com/hsu-net/daemon/actions/workflows/deploy.yml/badge.svg?branch=preview)](https://github.com/hsu-net/daemon/actions/workflows/deploy.yml)
[![main](https://github.com/hsu-net/daemon/actions/workflows/deploy.yml/badge.svg?branch=main)](https://github.com/hsu-net/daemon/actions/workflows/deploy.yml)
[![Nuke Build](https://img.shields.io/badge/nuke-build-yellow.svg)](https://github.com/nuke-build/nuke)
![windows](https://img.shields.io/badge/OS-Windows-blue.svg)
![linux](https://img.shields.io/badge/OS-Linux-blue.svg)


## Package Version

| Name | Source | Stable | Preview |
|---|---|---|---|
| Hsu.Daemon | Nuget | [![NuGet](https://img.shields.io/nuget/v/Hsu.Daemon?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon) | [![NuGet](https://img.shields.io/nuget/vpre/Hsu.Daemon?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon) |
| Hsu.Daemon | MyGet | [![MyGet](https://img.shields.io/myget/godsharp/v/Hsu.Daemon?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon) | [![MyGet](https://img.shields.io/myget/godsharp/vpre/Hsu.Daemon?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon) |
| Hsu.Daemon.Hosting | Nuget | [![NuGet](https://img.shields.io/nuget/v/Hsu.Daemon.Hosting?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon.Hosting) | [![NuGet](https://img.shields.io/nuget/vpre/Hsu.Daemon.Hosting?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon.Hosting) |
| Hsu.Daemon.Hosting | MyGet | [![MyGet](https://img.shields.io/myget/godsharp/v/Hsu.Daemon.Hosting?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon.Hosting) | [![MyGet](https://img.shields.io/myget/godsharp/vpre/Hsu.Daemon.Hosting?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon.Hosting) |
| Hsu.Daemon.Hosting.Web | Nuget | [![NuGet](https://img.shields.io/nuget/v/Hsu.Daemon.Hosting.Web?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon.Hosting.Web) | [![NuGet](https://img.shields.io/nuget/vpre/Hsu.Daemon.Hosting.Web?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon.Hosting.Web) |
| Hsu.Daemon.Hosting.Web | MyGet | [![MyGet](https://img.shields.io/myget/godsharp/v/Hsu.Daemon.Hosting.Web?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon.Hosting.Web) | [![MyGet](https://img.shields.io/myget/godsharp/vpre/Hsu.Daemon.Hosting.Web?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon.Hosting.Web) |
| Hsu.Daemon.Hosting.Legacy | Nuget | [![NuGet](https://img.shields.io/nuget/v/Hsu.Daemon.Hosting.Legacy?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon.Hosting.Legacy) | [![NuGet](https://img.shields.io/nuget/vpre/Hsu.Daemon.Hosting.Legacy?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon.Hosting.Legacy) |
| Hsu.Daemon.Hosting.Legacy | MyGet | [![MyGet](https://img.shields.io/myget/godsharp/v/Hsu.Daemon.Hosting.Legacy?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon.Hosting.Legacy) | [![MyGet](https://img.shields.io/myget/godsharp/vpre/Hsu.Daemon.Hosting.Legacy?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon.Hosting.Legacy) |
| Hsu.Daemon.Hosting.Web.Legacy | Nuget | [![NuGet](https://img.shields.io/nuget/v/Hsu.Daemon.Hosting.Web.Legacy?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon.Hosting.Web.Legacy) | [![NuGet](https://img.shields.io/nuget/vpre/Hsu.Daemon.Hosting.Web.Legacy?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon.Hosting.Web.Legacy) |
| Hsu.Daemon.Hosting.Web.Legacy | MyGet | [![MyGet](https://img.shields.io/myget/godsharp/v/Hsu.Daemon.Hosting.Web.Legacy?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon.Hosting.Web.Legacy) | [![MyGet](https://img.shields.io/myget/godsharp/vpre/Hsu.Daemon.Hosting.Web.Legacy?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon.Hosting.Web.Legacy) |
| Hsu.Daemon.Template | Nuget | [![NuGet](https://img.shields.io/nuget/v/Hsu.Daemon.Template?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon.Template) | [![NuGet](https://img.shields.io/nuget/vpre/Hsu.Daemon.Template?style=flat-square)](https://www.nuget.org/packages/Hsu.Daemon.Template) |
| Hsu.Daemon.Template | MyGet | [![MyGet](https://img.shields.io/myget/godsharp/v/Hsu.Daemon.Template?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon.Template) | [![MyGet](https://img.shields.io/myget/godsharp/vpre/Hsu.Daemon.Template?style=flat-square&label=myget)](https://www.myget.org/feed/godsharp/package/nuget/Hsu.Daemon.Template) |

> - Legacy : Used for netfx.
> - Web : Used for `IWebHost`.

## Getting Started

### Self Commands

  ```bash
  # windows
  appName.exe --help
  # Linux
  dotnet appName.dll --help
  ```

### Windows Service(.NET Framework)

  ```ps
  PM> Install-Package Hsu.Daemon
  ```

  ```csharp
  DaemonHost
    .Run(x => x
            .OnStart(OnStart)
            .OnStop(OnStop)
        , args);
  ```
### Worker Service


  ```ps
  PM> Install-Package Hsu.Daemon.Hosting
  ```

  ```csharp
  // 1. To parser arguments 
  if (!Hsu.Daemon.Host.Runnable(args, out var code)) return;
  var builder = Host.CreateDefaultBuilder(args);
  
  // 2. Use middleware
  // builder.UseWindowsService();
  // or
  // builder.UseSystemd();

  // 3. Execute serving or console
  builder.Build().Run(code);
  ```

## License

  MIT